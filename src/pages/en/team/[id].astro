---
import Layout from "@layouts/Layout.astro";
import VCF from "@components/team/VCF";
import teamMembers from "@components/team/TeamMembersEN";

export function getStaticPaths() {
  const paths = [
    "Juan-Manuel-Gonzalez-Castillo",
    "Karen-Valdez-Macias",
    "Yazmin-Guardado-Mendez",
    "Kevin-Ortega-Okhuysen",
    "Juan-Carlos-Guerrero-Castro",
    "Jesus-Emmanuel-Castillo-Martinez",
    "Maria-Jose-Zuili-Almanza",
  ];

  return paths.map((id) => ({ params: { id } }));
}

const { id } = Astro.params;
const URL = Astro.url;

const MEMBER_MAP = {
  "Kevin-Ortega-Okhuysen": 1,
  "Karen-Valdez-Macias": 2,
  "Yazmin-Guardado-Mendez": 3,
  "Juan-Manuel-Gonzalez-Castillo": 4,
  "Juan-Carlos-Guerrero-Castro": 5,
  "Jesus-Emmanuel-Castillo-Martinez": 6,
  "Maria-Jose-Zuili-Almanza": 7,
};

const member = teamMembers.find((m) => m.id === MEMBER_MAP[id]);

if (!member) return Astro.redirect("/404");

const pageTitle = `${member.fullName} - ${member.role}`;
---

<Layout title={pageTitle}>
  <div
    class="min-h-screen bg-gradient-to-br from-slate-50 via-white to-[#861453]/5"
  >
    <!-- Hero Section -->
    <section
      class="relative overflow-hidden bg-gradient-to-r from-[#861453] via-[#a61866] to-[#861453]"
    >
      <div class="absolute inset-0 bg-black/20"></div>
      <div class="absolute inset-0">
        <div
          class="absolute top-10 left-10 w-72 h-72 bg-white/10 rounded-full blur-3xl"
        >
        </div>
        <div
          class="absolute bottom-10 right-10 w-96 h-96 bg-[#861453]/10 rounded-full blur-3xl"
        >
        </div>
      </div>

      <div class="relative container mx-auto px-6 py-16">
        <nav class="mb-8">
          <a
            href="/en/#team"
            class="group inline-flex items-center gap-3 text-white/90 hover:text-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-[#861453] rounded-lg p-2"
          >
            <div
              class="p-2 rounded-full bg-white/10 group-hover:bg-white/20 backdrop-blur-sm transition-colors"
            >
              <svg
                class="w-4 h-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 19l-7-7 7-7"></path>
              </svg>
            </div>
            <span class="font-medium">Back to Team</span>
          </a>
        </nav>

        <div class="grid lg:grid-cols-2 gap-12 items-center">
          <div class="space-y-6">
            <div class="space-y-4">
              <h1
                class="text-4xl lg:text-6xl font-bold text-white leading-tight"
              >
                {member.fullName}
              </h1>
              <p
                class="text-xl lg:text-2xl text-white/80 font-medium uppercase"
              >
                {member.role}
              </p>
            </div>

            <div class="flex flex-wrap gap-3">
              {
                member.skills
                  .split(",")
                  .map((skill) => (
                    <span class="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-full text-white text-sm font-medium border border-white/30 transition-all duration-300 hover:bg-white/30">
                      {skill.trim()}
                    </span>
                  ))
              }
            </div>
          </div>

          <div class="flex justify-center lg:justify-end">
            <div class="relative">
              <div
                class="absolute -inset-4 bg-gradient-to-r from-[#861453] to-[#a61866] rounded-full blur-2xl opacity-30"
              >
              </div>
              <img
                src={member.image}
                alt={`${member.fullName} - ${member.role}`}
                transition:name={member.transition}
                class="relative w-80 h-80 object-cover rounded-full border-4 border-white/20 shadow-2xl"
              />
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Bento Grid Layout -->
    <main class="container mx-auto px-6 -mt-20 relative z-10 pb-20">
      <div
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-6 md:auto-rows-fr"
      >
        <!-- Contact Info Card - Compact -->
        <div
          class="md:col-span-1 lg:col-span-2 xl:col-span-2 bg-white rounded-3xl shadow-xl border border-[#861453]/10 p-6 flex flex-col justify-between min-h-[300px]"
        >
          <div>
            <div class="flex items-center gap-3 mb-6">
              <div class="w-2 h-2 bg-[#861453] rounded-full"></div>
              <h2 class="text-lg font-bold text-gray-900">Contact Info</h2>
            </div>

            <dl class="space-y-4">
              {
                member.experience && (
                  <div>
                    <dt class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1">
                      Experience
                    </dt>
                    <dd class="text-gray-900 font-medium text-sm">
                      {member.experience}
                    </dd>
                  </div>
                )
              }

              <div>
                <dt
                  class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1"
                >
                  Education
                </dt>
                <dd
                  class="text-gray-900 font-medium text-sm whitespace-pre-wrap"
                >
                  {member.education}
                </dd>
              </div>

              <div>
                <dt
                  class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1"
                >
                  Email
                </dt>
                <dd class="text-gray-900 font-medium text-sm">
                  {member.contact}
                </dd>
              </div>
            </dl>
          </div>

          <div class="pt-4 border-t border-[#861453]/10">
            <VCF member={member} client:visible currentURL={URL} />
          </div>
        </div>

        <!-- About Section - Large -->
        {
          member.extendedDescription && (
            <div class="md:col-span-2 lg:col-span-2 xl:col-span-4 bg-white rounded-3xl shadow-xl border border-[#861453]/10 p-8 flex flex-col">
              <div class="flex items-center gap-4 mb-6">
                <span class="w-1 h-8 bg-gradient-to-b from-[#861453] to-[#a61866] rounded-full" />
                <h2 class="text-2xl font-bold text-gray-900">
                  About {member.fullName}
                </h2>
              </div>

              <div class="flex-grow">
                <div class="space-y-4">
                  <p class="text-gray-700 leading-relaxed text-justify">
                    {member.extendedDescription}
                  </p>
                  {member.extendedDescription2 && (
                    <p class="text-gray-700 leading-relaxed text-justify">
                      {member.extendedDescription2}
                    </p>
                  )}
                </div>
              </div>
            </div>
          )
        }

        <!-- Skills Section - Medium -->
        <div
          class="md:col-span-2 lg:col-span-4 xl:col-span-3 bg-white/70 rounded-3xl shadow-xl border border-[#861453]/10 p-6"
        >
          <div class="flex items-center gap-4 mb-6">
            <span
              class="w-1 h-6 bg-gradient-to-b from-[#861453] to-[#a61866] rounded-full"
            ></span>
            <h2 class="text-xl font-bold text-gray-900">Detailed Skills</h2>
          </div>

          <div
            class="bg-gradient-to-r from-gray-50 to-[#861453]/5 rounded-2xl p-4"
          >
            <div
              class="text-gray-800 leading-relaxed whitespace-pre-wrap text-sm font-mono overflow-auto max-h-80"
              set:html={member.detailedSkills}
            />
          </div>
        </div>

        <!-- Work Ethics - Medium -->
        <div
          class="md:col-span-2 lg:col-span-4 xl:col-span-3 bg-white/70 rounded-3xl shadow-xl border border-[#861453]/20 p-6"
        >
          <div class="flex items-center gap-4 mb-6">
            <span
              class="w-1 h-6 bg-gradient-to-b from-[#861453] to-[#a61866] rounded-full"
            ></span>
            <h2 class="text-xl font-bold text-gray-900">
              Working with {member.name}
            </h2>
          </div>

          <div
            class="bg-white/70 backdrop-blur-sm rounded-2xl p-4 flex items-center"
          >
            <p class="text-gray-800 leading-relaxed text-justify">
              {member.workEthic}
            </p>
          </div>
        </div>

        <!-- Fun Facts - Full Width if exists -->
        <!-- {
          member.additionalDetails?.funFacts && (
            <div class="md:col-span-2 lg:col-span-4 xl:col-span-6 bg-white rounded-3xl shadow-xl border border-[#861453]/10 p-8">
              <div class="flex items-center gap-4 mb-6">
                <span class="w-1 h-8 bg-gradient-to-b from-[#861453] to-[#a61866] rounded-full" />
                <h2 class="text-2xl font-bold text-gray-900">Datos Curiosos</h2>
              </div>

              <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                {member.additionalDetails.funFacts.map((fact, index) => (
                  <div class="group flex gap-4 p-4 rounded-2xl bg-gradient-to-r from-[#861453]/5 to-[#861453]/10 hover:from-[#861453]/10 hover:to-[#861453]/20 transition-all duration-300 border border-[#861453]/5 hover:border-[#861453]/20">
                    <div class="flex-shrink-0 w-8 h-8 bg-gradient-to-br from-[#861453] to-[#a61866] rounded-full flex items-center justify-center text-white font-bold text-sm">
                      {index + 1}
                    </div>
                    <p class="text-gray-800 leading-relaxed text-justify pt-1 text-sm">
                      {fact}
                    </p>
                  </div>
                ))}
              </div>
            </div>
          )
        } -->

        <!-- Additional Visual Element - Stats or Quick Info -->
        <!-- <div
          class="md:col-span-1 lg:col-span-2 xl:col-span-2 bg-gradient-to-br from-[#861453] to-[#a61866] rounded-3xl shadow-xl p-6 text-white flex flex-col justify-center items-center text-center min-h-[200px]"
        >
          <div class="space-y-4">
            <div
              class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto"
            >
              <svg
                class="w-8 h-8"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                ></path>
              </svg>
            </div>
            <div>
              <h3 class="font-bold text-lg">Miembro del Equipo</h3>
              <p class="text-white/80 text-sm">Especialista en {member.role}</p>
            </div>
          </div>
        </div> -->

        <!-- Quote or Mission - If we want to add more personality -->
        <!-- <div
          class="md:col-span-1 lg:col-span-2 xl:col-span-2 bg-gradient-to-br from-gray-900 to-gray-800 rounded-3xl shadow-xl p-6 text-white flex flex-col justify-center min-h-[200px]"
        >
          <div class="text-center space-y-4">
            <svg
              class="w-8 h-8 text-[#861453] mx-auto"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h4v10h-10z"
              ></path>
            </svg>
            <div>
              <p class="text-sm text-gray-300 italic leading-relaxed">
                "La excelencia técnica y la colaboración son la base del éxito
                en cada proyecto"
              </p>
            </div>
          </div>
        </div> -->
      </div>
    </main>
  </div>
</Layout>
